<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Proofr - Advanced Payment Gateway</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        :root {
            --primary-blue: #001a33;
            --accent-blue: #0055ff;
            --light-blue: #e6f0ff;
            --highlight: #00c896;
            --success: #4CAF50;
            --warning: #FF9800;
            --danger: #F44336;
            --light-bg: #f8f9ff;
            --card-shadow: 0 10px 30px rgba(0, 85, 255, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--light-bg);
            color: #333;
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            background-image: radial-gradient(circle at 1% 1%, rgba(0, 85, 255, 0.05) 0%, transparent 90%);
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            width: 100%;
        }
        
        header {
            background-color: white;
            box-shadow: 0 2px 15px rgba(0, 26, 51, 0.1);
            padding: 15px 0;
            position: sticky;
            top: 0;
            z-index: 100;
        }
        
        .header-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .logo {
            display: flex;
            align-items: center;
            font-weight: 700;
            font-size: 28px;
            color: var(--primary-blue);
        }
        
        .logo span {
            color: var(--accent-blue);
        }
        
        .trust-badge {
            display: flex;
            align-items: center;
            gap: 10px;
            background: rgba(0, 85, 255, 0.05);
            border-radius: 30px;
            padding: 8px 20px;
            font-size: 14px;
            color: var(--primary-blue);
        }
        
        .trust-badge i {
            color: var(--success);
        }
        
        .payment-flow {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            gap: 10px;
        }
        
        .step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            flex: 1;
            max-width: 200px;
        }
        
        .step:not(:last-child)::after {
            content: '';
            position: absolute;
            top: 24px;
            left: 60%;
            width: 80%;
            height: 2px;
            background: #ddd;
            z-index: 1;
        }
        
        .step.active:not(:last-child)::after {
            background: var(--accent-blue);
        }
        
        .step-number {
            width: 48px;
            height: 48px;
            border-radius: 50%;
            background: #f0f4f8;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 10px;
            z-index: 2;
            color: #777;
            border: 2px solid #ddd;
        }
        
        .step.active .step-number {
            background: var(--accent-blue);
            color: white;
            border-color: var(--accent-blue);
        }
        
        .step.completed .step-number {
            background: var(--success);
            color: white;
            border-color: var(--success);
        }
        
        .step.completed .step-number i {
            display: block;
        }
        
        .step.completed .step-number span {
            display: none;
        }
        
        .step-name {
            font-size: 14px;
            text-align: center;
            color: #777;
        }
        
        .step.active .step-name,
        .step.completed .step-name {
            color: var(--primary-blue);
            font-weight: 500;
        }
        
        .payment-container {
            display: flex;
            gap: 30px;
            margin-top: 20px;
        }
        
        .form-section, .summary-section {
            background: white;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            padding: 30px;
            flex: 1;
        }
        
        .section-title {
            font-size: 24px;
            color: var(--primary-blue);
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #f0f4f8;
        }
        
        .form-group {
            margin-bottom: 20px;
        }
        
        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #555;
        }
        
        .form-group input, 
        .form-group select {
            width: 100%;
            padding: 14px;
            border: 1px solid #ddd;
            border-radius: 10px;
            font-family: 'Poppins', sans-serif;
            font-size: 16px;
            transition: all 0.3s;
        }
        
        .form-group input:focus, 
        .form-group select:focus {
            border-color: var(--accent-blue);
            outline: none;
            box-shadow: 0 0 0 3px rgba(0, 85, 255, 0.1);
        }
        
        .form-row {
            display: flex;
            gap: 15px;
        }
        
        .form-row .form-group {
            flex: 1;
        }
        
        .event-selection {
            border: 1px solid #ddd;
            border-radius: 10px;
            overflow: hidden;
        }
        
        .event-option {
            padding: 15px;
            border-bottom: 1px solid #eee;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .event-option:last-child {
            border-bottom: none;
        }
        
        .event-option:hover {
            background: #f9f9ff;
        }
        
        .event-option.selected {
            background: rgba(0, 85, 255, 0.05);
            border-left: 3px solid var(--accent-blue);
        }
        
        .event-name {
            font-weight: 600;
            color: var(--primary-blue);
        }
        
        .event-details {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 14px;
            color: #666;
        }
        
        .event-price {
            font-weight: 700;
            color: var(--primary-blue);
            font-size: 18px;
        }
        
        .payment-amount {
            background: rgba(0, 200, 150, 0.05);
            padding: 20px;
            border-radius: 15px;
            text-align: center;
            margin: 25px 0;
        }
        
        .amount-label {
            font-size: 16px;
            color: #666;
            margin-bottom: 5px;
        }
        
        .amount-value {
            font-size: 36px;
            font-weight: 700;
            color: var(--primary-blue);
        }
        
        .btn {
            display: inline-block;
            background: var(--accent-blue);
            color: white;
            border: none;
            padding: 16px 30px;
            border-radius: 30px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            text-decoration: none;
            font-size: 16px;
            text-align: center;
            width: 100%;
        }
        
        .btn:hover {
            background: #0044cc;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 85, 255, 0.3);
        }
        
        .btn-success {
            background: var(--success);
        }
        
        .btn-success:hover {
            background: #3d8b40;
        }
        
        .btn-warning {
            background: var(--warning);
        }
        
        .btn-warning:hover {
            background: #e68a00;
        }
        
        .btn-danger {
            background: var(--danger);
        }
        
        .btn-danger:hover {
            background: #d32f2f;
        }
        
        .payment-methods {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-top: 25px;
        }
        
        .payment-method {
            display: flex;
            align-items: center;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .payment-method:hover {
            border-color: var(--accent-blue);
            background: #f9f9ff;
        }
        
        .payment-method.selected {
            border-color: var(--accent-blue);
            background: rgba(0, 85, 255, 0.05);
        }
        
        .payment-icon {
            width: 50px;
            height: 50px;
            background: #f0f4f8;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 15px;
            font-size: 24px;
            color: var(--primary-blue);
        }
        
        .payment-details {
            flex: 1;
        }
        
        .payment-name {
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: 5px;
        }
        
        .payment-description {
            font-size: 14px;
            color: #666;
        }
        
        .qr-section {
            text-align: center;
            padding: 30px;
            background: #f9f9ff;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        #qrcode {
            display: inline-block;
            margin: 15px auto;
            padding: 15px;
            background: white;
            border-radius: 10px;
        }
        
        .order-id {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-blue);
            margin: 15px 0;
        }
        
        .order-id span {
            background: rgba(0, 85, 255, 0.1);
            padding: 5px 15px;
            border-radius: 20px;
        }
        
        .success-container {
            text-align: center;
            max-width: 600px;
            margin: 50px auto;
            padding: 40px;
            background: white;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
        }
        
        .success-animation {
            width: 100px;
            height: 100px;
            background: var(--success);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            animation: scaleIn 0.5s ease-out;
        }
        
        .success-animation i {
            font-size: 50px;
            color: white;
        }
        
        @keyframes scaleIn {
            0% { transform: scale(0); opacity: 0; }
            70% { transform: scale(1.1); }
            100% { transform: scale(1); opacity: 1; }
        }
        
        .success-title {
            font-size: 32px;
            color: var(--success);
            margin-bottom: 15px;
        }
        
        .success-message {
            font-size: 18px;
            color: #555;
            margin-bottom: 30px;
        }
        
        .payment-details-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            text-align: left;
            margin: 30px 0;
            background: #f9f9ff;
            padding: 20px;
            border-radius: 15px;
        }
        
        .detail-item {
            margin-bottom: 15px;
        }
        
        .detail-label {
            font-size: 14px;
            color: #777;
            margin-bottom: 5px;
        }
        
        .detail-value {
            font-size: 16px;
            font-weight: 500;
            color: var(--primary-blue);
        }
        
        .whatsapp-group {
            background: rgba(37, 211, 102, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin: 25px 0;
        }
        
        .whatsapp-group p {
            margin-bottom: 15px;
            color: #555;
        }
        
        .btn-whatsapp {
            background: #25D366;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }
        
        .btn-whatsapp:hover {
            background: #1da851;
        }
        
        .action-buttons {
            display: flex;
            gap: 15px;
            margin-top: 30px;
        }
        
        .action-buttons .btn {
            width: auto;
            flex: 1;
        }
        
        footer {
            background: var(--primary-blue);
            color: white;
            padding: 40px 0 20px;
            margin-top: auto;
        }
        
        .footer-container {
            display: flex;
            justify-content: space-between;
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }
        
        .footer-section {
            flex: 1;
        }
        
        .footer-section h3 {
            font-size: 18px;
            margin-bottom: 15px;
        }
        
        .footer-section p, .footer-section a {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 10px;
            text-decoration: none;
            display: block;
        }
        
        .footer-section a:hover {
            color: white;
        }
        
        .copyright {
            text-align: center;
            padding-top: 20px;
            margin-top: 30px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(255, 255, 255, 0.6);
            font-size: 14px;
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .payment-status {
            display: none;
            text-align: center;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .status-success {
            background-color: rgba(76, 175, 80, 0.1);
            border: 1px solid var(--success);
            color: var(--success);
        }
        
        .status-failure {
            background-color: rgba(244, 67, 54, 0.1);
            border: 1px solid var(--danger);
            color: var(--danger);
        }
        
        .status-pending {
            background-color: rgba(255, 152, 0, 0.1);
            border: 1px solid var(--warning);
            color: var(--warning);
        }
        
        .status-content {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            margin: 10px 0;
        }
        
        .status-icon {
            font-size: 24px;
        }
        
        .screenshot-note {
            background: rgba(0, 85, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
            color: var(--primary-blue);
        }
        
        .screenshot-note i {
            margin-right: 8px;
            color: var(--accent-blue);
        }
        
        .payment-tracker {
            margin: 20px 0;
            padding: 20px;
            background: #f9f9ff;
            border-radius: 15px;
            border: 1px solid #e6e6ff;
        }
        
        .tracker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .tracker-title {
            font-size: 18px;
            font-weight: 600;
            color: var(--primary-blue);
        }
        
        .tracker-status {
            font-size: 14px;
            padding: 5px 15px;
            border-radius: 20px;
            background: rgba(0, 85, 255, 0.1);
            color: var(--accent-blue);
        }
        
        .tracker-progress {
            height: 10px;
            background: #e6e6ff;
            border-radius: 5px;
            overflow: hidden;
            margin-bottom: 15px;
        }
        
        .progress-bar {
            height: 100%;
            width: 0%;
            background: var(--accent-blue);
            transition: width 0.5s ease;
        }
        
        .tracker-steps {
            display: flex;
            justify-content: space-between;
            position: relative;
            padding-top: 30px;
        }
        
        .tracker-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        
        .step-circle {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: #e6e6ff;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            color: #999;
            font-size: 14px;
        }
        
        .step-circle.active {
            background: var(--accent-blue);
            color: white;
        }
        
        .step-circle.completed {
            background: var(--success);
            color: white;
        }
        
        .step-name {
            font-size: 12px;
            text-align: center;
            color: #777;
            max-width: 80px;
        }
        
        .status-indicators {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        .status-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 10px;
            border-radius: 10px;
            background: white;
            width: 30%;
            box-shadow: 0 3px 10px rgba(0,0,0,0.05);
        }
        
        .indicator-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 10px;
            font-size: 18px;
        }
        
        .indicator-success {
            background: rgba(76, 175, 80, 0.1);
            color: var(--success);
        }
        
        .indicator-pending {
            background: rgba(255, 152, 0, 0.1);
            color: var(--warning);
        }
        
        .indicator-failed {
            background: rgba(244, 67, 54, 0.1);
            color: var(--danger);
        }
        
        .indicator-value {
            font-weight: 600;
            font-size: 18px;
            margin-bottom: 5px;
        }
        
        .indicator-label {
            font-size: 12px;
            color: #777;
        }
        
        .manual-verification {
            background: rgba(255, 152, 0, 0.05);
            border: 1px dashed var(--warning);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
        
        .manual-verification p {
            margin-bottom: 15px;
            color: var(--warning);
        }
        
        /* Responsive styles */
        @media (max-width: 992px) {
            .payment-container {
                flex-direction: column;
            }
            
            .payment-flow {
                flex-wrap: wrap;
            }
            
            .step:not(:last-child)::after {
                display: none;
            }
            
            .status-indicators {
                flex-direction: column;
                gap: 10px;
            }
            
            .status-indicator {
                width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            .form-row {
                flex-direction: column;
                gap: 0;
            }
            
            .payment-details-grid {
                grid-template-columns: 1fr;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .footer-container {
                flex-direction: column;
                gap: 30px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">proo<span>fr</span></div>
            <div class="trust-badge">
                <i class="fas fa-lock"></i>
                <span>Secure Payment Gateway • Real-time Tracking</span>
            </div>
        </div>
    </header>
    
    <div class="container">
        <!-- Payment Flow Indicator -->
        <div class="payment-flow">
            <div class="step active" id="step1">
                <div class="step-number"><span>1</span></div>
                <div class="step-name">Enter Details</div>
            </div>
            <div class="step" id="step2">
                <div class="step-number"><span>2</span></div>
                <div class="step-name">Make Payment</div>
            </div>
            <div class="step" id="step3">
                <div class="step-number"><span>3</span></div>
                <div class="step-name">Confirmation</div>
            </div>
        </div>
        
        <!-- Page 1: Registration Form -->
        <div class="page active" id="registrationPage">
            <div class="payment-container">
                <div class="form-section">
                    <h2 class="section-title">Personal Information</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="firstName">First Name</label>
                            <input type="text" id="firstName" placeholder="Enter your first name">
                        </div>
                        <div class="form-group">
                            <label for="lastName">Last Name</label>
                            <input type="text" id="lastName" placeholder="Enter your last name">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="course">Course</label>
                        <input type="text" id="course" placeholder="e.g., B.Com, B.Tech, MBA">
                    </div>
                    
                    <div class="form-group">
                        <label for="year">Year</label>
                        <select id="year">
                            <option value="">Select your year</option>
                            <option value="1">1st Year</option>
                            <option value="2">2nd Year</option>
                            <option value="3">3rd Year</option>
                            <option value="4">4th Year</option>
                            <option value="5">5th Year</option>
                        </select>
                    </div>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="mobile">Mobile Number</label>
                            <input type="tel" id="mobile" placeholder="Enter 10-digit mobile number">
                        </div>
                        <div class="form-group">
                            <label for="whatsapp">WhatsApp Number</label>
                            <input type="tel" id="whatsapp" placeholder="Enter WhatsApp number">
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label for="email">Email Address</label>
                        <input type="email" id="email" placeholder="Enter your email address">
                    </div>
                </div>
                
                <div class="summary-section">
                    <h2 class="section-title">Select Event</h2>
                    
                    <div class="event-selection">
                        <div class="event-option" data-value="placement-fellowship" data-amount="1">
                            <div class="event-name">Placements 101 Fellowship</div>
                            <div class="event-details">
                                <span>21-day intensive program</span>
                                <span class="event-price">₹1</span>
                            </div>
                        </div>
                        <div class="event-option" data-value="consulting-workshop" data-amount="499">
                            <div class="event-name">Consulting Workshop</div>
                            <div class="event-details">
                                <span>2-day workshop with industry experts</span>
                                <span class="event-price">₹499</span>
                            </div>
                        </div>
                        <div class="event-option" data-value="finance-masterclass" data-amount="399">
                            <div class="event-name">Finance Masterclass</div>
                            <div class="event-details">
                                <span>3-day finance technical training</span>
                                <span class="event-price">₹399</span>
                            </div>
                        </div>
                        <div class="event-option" data-value="product-mgmt-session" data-amount="199">
                            <div class="event-name">Product Management Session</div>
                            <div class="event-details">
                                <span>Live session with product leaders</span>
                                <span class="event-price">₹199</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-amount">
                        <div class="amount-label">Total Amount</div>
                        <div class="amount-value" id="amountDisplay">₹0</div>
                    </div>
                    
                    <button class="btn" id="continueToPayment">Continue to Payment</button>
                </div>
            </div>
        </div>
        
        <!-- Page 2: Payment Page -->
        <div class="page" id="paymentPage">
            <div class="payment-container">
                <div class="form-section">
                    <h2 class="section-title">Payment Method</h2>
                    
                    <div class="payment-methods">
                        <div class="payment-method selected" data-method="qr">
                            <div class="payment-icon">
                                <i class="fas fa-qrcode"></i>
                            </div>
                            <div class="payment-details">
                                <div class="payment-name">Scan QR Code</div>
                                <div class="payment-description">Scan with any UPI app to pay instantly</div>
                            </div>
                        </div>
                        
                        <div class="payment-method" data-method="paytm">
                            <div class="payment-icon" style="background: #1C3AA1; color: white;">
                                <i class="fab fa-paytm"></i>
                            </div>
                            <div class="payment-details">
                                <div class="payment-name">Pay with Paytm</div>
                                <div class="payment-description">Open Paytm app to complete payment</div>
                            </div>
                        </div>
                        
                        <div class="payment-method" data-method="phonepe">
                            <div class="payment-icon" style="background: #5F259F; color: white;">
                                <i class="fas fa-mobile-alt"></i>
                            </div>
                            <div class="payment-details">
                                <div class="payment-name">Pay with PhonePe</div>
                                <div class="payment-description">Open PhonePe app to complete payment</div>
                            </div>
                        </div>
                        
                        <div class="payment-method" data-method="gpay">
                            <div class="payment-icon" style="background: #4285F4; color: white;">
                                <i class="fab fa-google-pay"></i>
                            </div>
                            <div class="payment-details">
                                <div class="payment-name">Pay with Google Pay</div>
                                <div class="payment-description">Open Google Pay app to complete payment</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="payment-tracker">
                        <div class="tracker-header">
                            <div class="tracker-title">Payment Status</div>
                            <div class="tracker-status">Monitoring</div>
                        </div>
                        <div class="tracker-progress">
                            <div class="progress-bar" id="progressBar"></div>
                        </div>
                        <div class="tracker-steps">
                            <div class="tracker-step">
                                <div class="step-circle completed"><i class="fas fa-check"></i></div>
                                <div class="step-name">Initiated</div>
                            </div>
                            <div class="tracker-step">
                                <div class="step-circle active" id="stepProcessing"><i class="fas fa-sync-alt fa-spin"></i></div>
                                <div class="step-name">Processing</div>
                            </div>
                            <div class="tracker-step">
                                <div class="step-circle" id="stepCompleted">3</div>
                                <div class="step-name">Completed</div>
                            </div>
                        </div>
                        
                        <div class="status-indicators">
                            <div class="status-indicator">
                                <div class="indicator-icon indicator-success">
                                    <i class="fas fa-check"></i>
                                </div>
                                <div class="indicator-value">92%</div>
                                <div class="indicator-label">Success Rate</div>
                            </div>
                            <div class="status-indicator">
                                <div class="indicator-icon indicator-pending">
                                    <i class="fas fa-clock"></i>
                                </div>
                                <div class="indicator-value">5%</div>
                                <div class="indicator-label">Pending</div>
                            </div>
                            <div class="status-indicator">
                                <div class="indicator-icon indicator-failed">
                                    <i class="fas fa-times"></i>
                                </div>
                                <div class="indicator-value">3%</div>
                                <div class="indicator-label">Failed</div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="summary-section">
                    <h2 class="section-title">Payment Details</h2>
                    
                    <div class="qr-section" id="qrSection">
                        <div id="qrcode"></div>
                        <div class="order-id">Order ID: <span id="orderIdDisplay">----</span></div>
                        <p>Scan this QR code with any UPI app to complete your payment</p>
                    </div>
                    
                    <div id="appPaySection" style="display: none;">
                        <div class="screenshot-note">
                            <i class="fas fa-info-circle"></i>
                            After payment, please take a screenshot for your records
                        </div>
                        <button class="btn" id="openAppBtn">Open in <span id="appName">App</span></button>
                        <p style="text-align: center; margin: 15px 0;">After payment, you'll be redirected back to this page automatically</p>
                    </div>
                    
                    <div class="payment-amount">
                        <div class="amount-label">Amount to Pay</div>
                        <div class="amount-value" id="paymentAmountDisplay">₹0</div>
                    </div>
                    
                    <div class="payment-status" id="paymentStatus">
                        <div class="status-content">
                            <i class="status-icon"></i>
                            <div class="status-message"></div>
                        </div>
                    </div>
                    
                    <div class="manual-verification" id="manualVerificationSection" style="display: none;">
                        <p><i class="fas fa-exclamation-triangle"></i> We couldn't automatically verify your payment status</p>
                        <div class="form-group">
                            <label for="manualTransactionId">Enter UPI Transaction ID</label>
                            <input type="text" id="manualTransactionId" placeholder="Enter reference ID from your bank">
                        </div>
                        <button class="btn btn-warning" id="submitManualVerification">Submit for Verification</button>
                    </div>
                    
                    <div id="transactionIdSection" style="display: none;">
                        <div class="form-group">
                            <label for="transactionId">UPI Transaction ID (After Payment)</label>
                            <input type="text" id="transactionId" placeholder="Enter UPI transaction reference ID">
                        </div>
                    </div>
                    
                    <button class="btn btn-success" id="confirmPayment" style="display: none;">Confirm Payment</button>
                    <button class="btn" id="backToDetails" style="background: #f0f4f8; color: #555; margin-top: 15px;">Back to Details</button>
                </div>
            </div>
        </div>
        
        <!-- Page 3: Success Page -->
        <div class="page" id="successPage">
            <div class="success-container">
                <div class="success-animation">
                    <i class="fas fa-check"></i>
                </div>
                
                <h1 class="success-title">Payment Successful!</h1>
                <p class="success-message">Thank you for your payment. Your registration is now complete.</p>
                
                <div class="screenshot-note">
                    <i class="fas fa-camera"></i>
                    We recommend taking a screenshot of this page for your records
                </div>
                
                <div class="payment-details-grid">
                    <div class="detail-item">
                        <div class="detail-label">Order ID</div>
                        <div class="detail-value" id="successOrderId">----</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Transaction ID</div>
                        <div class="detail-value" id="successTransactionId">----</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Event Name</div>
                        <div class="detail-value" id="successEventName">----</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Amount Paid</div>
                        <div class="detail-value" id="successAmount">₹0</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Date & Time</div>
                        <div class="detail-value" id="successDateTime">----</div>
                    </div>
                    <div class="detail-item">
                        <div class="detail-label">Payment Method</div>
                        <div class="detail-value" id="successMethod">----</div>
                    </div>
                </div>
                
                <div class="whatsapp-group">
                    <p><strong>Join our exclusive WhatsApp group</strong> to receive updates, resources, and session links for your event.</p>
                    <button class="btn btn-whatsapp" id="joinWhatsapp">
                        <i class="fab fa-whatsapp"></i> Join WhatsApp Group
                    </button>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" id="downloadReceiptPdf">
                        <i class="fas fa-file-pdf"></i> Download PDF Receipt
                    </button>
                    <button class="btn" id="downloadReceiptImage">
                        <i class="fas fa-image"></i> Download Image Receipt
                    </button>
                    <button class="btn" id="backToHome" style="background: #f0f4f8; color: #555;">
                        <i class="fas fa-home"></i> Back to Home
                    </button>
                </div>
            </div>
        </div>
    </div>
    
    <footer>
        <div class="footer-container">
            <div class="footer-section">
                <h3>Proofr Payments</h3>
                <p>Secure, reliable payment processing for all Proofr events and workshops.</p>
            </div>
            <div class="footer-section">
                <h3>Contact Support</h3>
                <p><i class="fas fa-envelope"></i> payments@proofr.in</p>
                <p><i class="fas fa-phone"></i> +91 96501 39943</p>
                <p><i class="fab fa-whatsapp"></i> +91 96501 39943</p>
            </div>
            <div class="footer-section">
                <h3>Business Hours</h3>
                <p>Monday - Friday: 9AM - 6PM</p>
                <p>Saturday: 10AM - 2PM</p>
                <p>Sunday: Closed</p>
            </div>
        </div>
        <div class="copyright">
            &copy; 2025 Proofr. All rights reserved. UPI ID: 8114070503-3@okbizaxis
        </div>
    </footer>

    <script>
        // Document elements
        const registrationPage = document.getElementById('registrationPage');
        const paymentPage = document.getElementById('paymentPage');
        const successPage = document.getElementById('successPage');
        const step1 = document.getElementById('step1');
        const step2 = document.getElementById('step2');
        const step3 = document.getElementById('step3');
        
        // Form elements
        const continueBtn = document.getElementById('continueToPayment');
        const backToDetailsBtn = document.getElementById('backToDetails');
        const confirmPaymentBtn = document.getElementById('confirmPayment');
        const joinWhatsappBtn = document.getElementById('joinWhatsapp');
        const downloadReceiptPdfBtn = document.getElementById('downloadReceiptPdf');
        const downloadReceiptImageBtn = document.getElementById('downloadReceiptImage');
        const backToHomeBtn = document.getElementById('backToHome');
        const openAppBtn = document.getElementById('openAppBtn');
        const submitManualVerificationBtn = document.getElementById('submitManualVerification');
        
        // Data elements
        const amountDisplay = document.getElementById('amountDisplay');
        const paymentAmountDisplay = document.getElementById('paymentAmountDisplay');
        const orderIdDisplay = document.getElementById('orderIdDisplay');
        const qrcodeDiv = document.getElementById('qrcode');
        const qrSection = document.getElementById('qrSection');
        const appPaySection = document.getElementById('appPaySection');
        const appNameSpan = document.getElementById('appName');
        const transactionIdSection = document.getElementById('transactionIdSection');
        const paymentStatus = document.getElementById('paymentStatus');
        const statusIcon = paymentStatus.querySelector('.status-icon');
        const statusMessage = paymentStatus.querySelector('.status-message');
        const progressBar = document.getElementById('progressBar');
        const stepProcessing = document.getElementById('stepProcessing');
        const stepCompleted = document.getElementById('stepCompleted');
        const manualVerificationSection = document.getElementById('manualVerificationSection');
        
        // Success page elements
        const successOrderId = document.getElementById('successOrderId');
        const successTransactionId = document.getElementById('successTransactionId');
        const successEventName = document.getElementById('successEventName');
        const successAmount = document.getElementById('successAmount');
        const successDateTime = document.getElementById('successDateTime');
        const successMethod = document.getElementById('successMethod');
        
        // Payment data
        let paymentData = {
            firstName: '',
            lastName: '',
            course: '',
            year: '',
            mobile: '',
            whatsapp: '',
            email: '',
            event: '',
            eventName: '',
            amount: 0,
            orderId: '',
            transactionId: '',
            paymentMethod: '',
            dateTime: '',
            status: 'pending'
        };
        
        // Trackers
        let paymentCheckInterval;
        let paymentProgress = 0;
        let paymentChecks = 0;
        
        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Event selection
            const eventOptions = document.querySelectorAll('.event-option');
            eventOptions.forEach(option => {
                option.addEventListener('click', function() {
                    eventOptions.forEach(opt => opt.classList.remove('selected'));
                    this.classList.add('selected');
                    
                    paymentData.event = this.dataset.value;
                    paymentData.eventName = this.querySelector('.event-name').textContent;
                    paymentData.amount = parseInt(this.dataset.amount);
                    
                    amountDisplay.textContent = `₹${paymentData.amount}`;
                });
            });
            
            // Payment method selection
            const paymentMethods = document.querySelectorAll('.payment-method');
            paymentMethods.forEach(method => {
                method.addEventListener('click', function() {
                    paymentMethods.forEach(m => m.classList.remove('selected'));
                    this.classList.add('selected');
                    paymentData.paymentMethod = this.dataset.method;
                    
                    // Show appropriate payment section
                    if (this.dataset.method === 'qr') {
                        qrSection.style.display = 'block';
                        appPaySection.style.display = 'none';
                    } else {
                        qrSection.style.display = 'none';
                        appPaySection.style.display = 'block';
                        appNameSpan.textContent = getPaymentMethodName(this.dataset.method);
                    }
                });
            });
            
            // Default to QR method
            document.querySelector('.payment-method[data-method="qr"]').classList.add('selected');
            paymentData.paymentMethod = 'qr';
            
            // Continue to payment button
            continueBtn.addEventListener('click', function() {
                // Collect form data
                paymentData.firstName = document.getElementById('firstName').value;
                paymentData.lastName = document.getElementById('lastName').value;
                paymentData.course = document.getElementById('course').value;
                paymentData.year = document.getElementById('year').value;
                paymentData.mobile = document.getElementById('mobile').value;
                paymentData.whatsapp = document.getElementById('whatsapp').value;
                paymentData.email = document.getElementById('email').value;
                
                // Validate required fields
                if (!paymentData.firstName || !paymentData.lastName || !paymentData.mobile || 
                    !paymentData.whatsapp || !paymentData.email || !paymentData.event) {
                    alert('Please fill all required fields and select an event.');
                    return;
                }
                
                // Generate unique order ID (timestamp + random)
                paymentData.orderId = Date.now() + '-' + Math.floor(1000 + Math.random() * 9000);
                orderIdDisplay.textContent = paymentData.orderId;
                
                // Update payment page
                paymentAmountDisplay.textContent = `₹${paymentData.amount}`;
                
                // Generate QR code
                generateQRCode();
                
                // Switch to payment page
                registrationPage.classList.remove('active');
                paymentPage.classList.add('active');
                
                // Update steps
                step1.classList.remove('active');
                step1.classList.add('completed');
                step2.classList.add('active');
                
                // Start payment tracking
                startPaymentTracking();
            });
            
            // Back to details button
            backToDetailsBtn.addEventListener('click', function() {
                clearInterval(paymentCheckInterval);
                paymentPage.classList.remove('active');
                registrationPage.classList.add('active');
                
                step1.classList.add('active');
                step1.classList.remove('completed');
                step2.classList.remove('active');
            });
            
            // Open app button for payment
            openAppBtn.addEventListener('click', function() {
                const deepLink = generateDeepLink(paymentData.paymentMethod);
                window.location.href = deepLink;
                
                // Start tracking when user returns to the page
                document.addEventListener('visibilitychange', handleVisibilityChange);
            });
            
            // Submit manual verification
            submitManualVerificationBtn.addEventListener('click', function() {
                const manualId = document.getElementById('manualTransactionId').value;
                if (!manualId) {
                    alert('Please enter your transaction ID');
                    return;
                }
                
                paymentData.transactionId = manualId;
                paymentData.dateTime = new Date().toLocaleString();
                paymentData.status = 'manual_verification';
                
                showPaymentStatus('pending', 'Payment submitted for manual verification');
                
                // After 2 seconds, simulate manual verification
                setTimeout(() => {
                    paymentData.status = 'success';
                    showPaymentStatus('success', 'Payment verified manually!');
                    completePayment();
                }, 2000);
            });
            
            // Back to home button
            backToHomeBtn.addEventListener('click', function() {
                resetPaymentFlow();
            });
        });
        
        function startPaymentTracking() {
            // Reset tracking variables
            paymentProgress = 0;
            paymentChecks = 0;
            progressBar.style.width = '0%';
            
            // Start the progress bar animation
            const progressInterval = setInterval(() => {
                if (paymentProgress < 100) {
                    paymentProgress += 0.5;
                    progressBar.style.width = paymentProgress + '%';
                } else {
                    clearInterval(progressInterval);
                }
            }, 20);
            
            // Start checking payment status
            paymentCheckInterval = setInterval(checkPaymentStatus, 3000);
            showPaymentStatus('pending', 'Monitoring payment status...');
        }
        
        function checkPaymentStatus() {
            paymentChecks++;
            
            // Simulate different payment outcomes
            if (paymentChecks >= 5) {
                // After 5 checks (15 seconds), show manual verification
                clearInterval(paymentCheckInterval);
                showPaymentStatus('pending', 'Unable to verify automatically');
                manualVerificationSection.style.display = 'block';
                return;
            }
            
            // Simulate payment success (80% success rate)
            if (paymentChecks >= 3 && Math.random() < 0.8) {
                clearInterval(paymentCheckInterval);
                paymentData.status = 'success';
                paymentData.transactionId = 'TXN' + Math.floor(1000000000 + Math.random() * 9000000000);
                paymentData.dateTime = new Date().toLocaleString();
                
                // Update tracker UI
                stepProcessing.classList.remove('active');
                stepProcessing.classList.add('completed');
                stepProcessing.innerHTML = '<i class="fas fa-check"></i>';
                stepCompleted.classList.add('completed');
                
                showPaymentStatus('success', 'Payment successful! Transaction ID: ' + paymentData.transactionId);
                completePayment();
                return;
            }
            
            // Simulate payment failure (10% failure rate)
            if (paymentChecks >= 2 && Math.random() < 0.1) {
                clearInterval(paymentCheckInterval);
                paymentData.status = 'failed';
                showPaymentStatus('failure', 'Payment failed. Please try again.');
                return;
            }
            
            // Still processing
            showPaymentStatus('pending', 'Checking payment status... (' + paymentChecks + '/5)');
        }
        
        function completePayment() {
            // Update success page
            successOrderId.textContent = paymentData.orderId;
            successTransactionId.textContent = paymentData.transactionId;
            successEventName.textContent = paymentData.eventName;
            successAmount.textContent = `₹${paymentData.amount}`;
            successDateTime.textContent = paymentData.dateTime;
            successMethod.textContent = getPaymentMethodName(paymentData.paymentMethod);
            
            // Switch to success page after delay
            setTimeout(() => {
                paymentPage.classList.remove('active');
                successPage.classList.add('active');
                
                // Update steps
                step2.classList.remove('active');
                step2.classList.add('completed');
                step3.classList.add('active');
                
                // Send notifications
                sendNotifications();
            }, 2000);
        }
        
        function handleVisibilityChange() {
            if (document.visibilityState === 'visible') {
                // User returned to the page - check payment status
                checkPaymentStatus();
                document.removeEventListener('visibilitychange', handleVisibilityChange);
            }
        }
        
        function generateQRCode() {
            // Clear previous QR code
            qrcodeDiv.innerHTML = '';
            
            // Create UPI payment string
            const upiString = `upi://pay?pa=paytm.s1kw75i@pty&pn=Proofr&am=${paymentData.amount}&cu=INR&tn=Payment for ${paymentData.eventName} (Order ID: ${paymentData.orderId})`;
            
            // Generate QR code
            new QRCode(qrcodeDiv, {
                text: upiString,
                width: 200,
                height: 200,
                colorDark: "#000000",
                colorLight: "#ffffff",
                correctLevel: QRCode.CorrectLevel.H
            });
        }
        
        function getPaymentMethodName(method) {
            switch(method) {
                case 'qr': return 'UPI QR Code';
                case 'paytm': return 'Paytm';
                case 'phonepe': return 'PhonePe';
                case 'gpay': return 'Google Pay';
                default: return 'UPI';
            }
        }
        
        function generateDeepLink(method) {
            const note = `Payment for ${paymentData.eventName} (Order ID: ${paymentData.orderId})`;
            const encodedNote = encodeURIComponent(note);
            const amount = paymentData.amount;
            
            // Fixed Paytm deep link to include order ID in notes
            switch(method) {
                case 'paytm':
                    return `paytmmp://pay?pa=paytm.s1kw75i@pty&pn=Proofr&am=${amount}&cu=INR&tn=${encodedNote}`;
                case 'phonepe':
                    return `phonepe://pay?pa=paytm.s1kw75i@pty&pn=Proofr&am=${amount}&cu=INR&tn=${encodedNote}`;
                case 'gpay':
                    return `tez://upi/pay?pa=paytm.s1kw75i@pty&pn=Proofr&am=${amount}&cu=INR&tn=${encodedNote}`;
                default:
                    return '';
            }
        }
        
        function showPaymentStatus(status, message) {
            paymentStatus.style.display = 'block';
            statusMessage.textContent = message;
            
            switch(status) {
                case 'success':
                    paymentStatus.className = 'payment-status status-success';
                    statusIcon.className = 'status-icon fas fa-check-circle';
                    break;
                case 'failure':
                    paymentStatus.className = 'payment-status status-failure';
                    statusIcon.className = 'status-icon fas fa-times-circle';
                    break;
                case 'pending':
                    paymentStatus.className = 'payment-status status-pending';
                    statusIcon.className = 'status-icon fas fa-spinner fa-spin';
                    break;
            }
        }
        
        function sendNotifications() {
            // Simulate sending email
            console.log(`Email sent to ${paymentData.email}: Payment confirmation for Order ID ${paymentData.orderId}`);
            
            // Simulate sending WhatsApp message
            console.log(`WhatsApp message sent to ${paymentData.whatsapp}: Payment confirmation for Order ID ${paymentData.orderId}`);
            
            alert(`Receipt sent to ${paymentData.email} and WhatsApp message sent to ${paymentData.whatsapp}`);
        }
        
        function generateReceiptPDF() {
            // Using jsPDF to generate receipt
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            // Add logo
            doc.setFontSize(22);
            doc.setTextColor(0, 0, 85);
            doc.text('proo', 20, 20);
            doc.setTextColor(0, 85, 255);
            doc.text('fr', 35, 20);
            
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text('Secure Payment Receipt', 20, 28);
            
            // Add receipt title
            doc.setFontSize(18);
            doc.setTextColor(0, 0, 0);
            doc.text('PAYMENT RECEIPT', 105, 40, null, null, 'center');
            
            // Add line
            doc.setDrawColor(200, 200, 200);
            doc.line(20, 45, 190, 45);
            
            // Add details
            doc.setFontSize(12);
            doc.setTextColor(100, 100, 100);
            doc.text('Receipt Number:', 20, 60);
            doc.text('Date:', 20, 70);
            doc.text('Order ID:', 20, 80);
            doc.text('Transaction ID:', 20, 90);
            
            doc.setTextColor(0, 0, 0);
            doc.text(`PR-${new Date().getTime()}`, 60, 60);
            doc.text(new Date().toLocaleDateString(), 60, 70);
            doc.text(paymentData.orderId, 60, 80);
            doc.text(paymentData.transactionId, 60, 90);
            
            // Add payment details
            doc.setTextColor(100, 100, 100);
            doc.text('Description:', 20, 110);
            doc.text('Amount:', 20, 120);
            doc.text('Payment Method:', 20, 130);
            
            doc.setTextColor(0, 0, 0);
            doc.text(paymentData.eventName, 60, 110);
            doc.text(`₹${paymentData.amount}`, 60, 120);
            doc.text(getPaymentMethodName(paymentData.paymentMethod), 60, 130);
            
            // Add user details
            doc.setTextColor(100, 100, 100);
            doc.text('Paid By:', 20, 150);
            doc.text('Email:', 20, 160);
            doc.text('Mobile:', 20, 170);
            
            doc.setTextColor(0, 0, 0);
            doc.text(`${paymentData.firstName} ${paymentData.lastName}`, 60, 150);
            doc.text(paymentData.email, 60, 160);
            doc.text(paymentData.mobile, 60, 170);
            
            // Add footer
            doc.setFontSize(10);
            doc.setTextColor(100, 100, 100);
            doc.text('Proofr Payments • payments@proofr.in • +91 96501 39943', 105, 280, null, null, 'center');
            doc.text('This is an auto-generated receipt. No signature required.', 105, 285, null, null, 'center');
            
            // Save the PDF
            doc.save(`proofr-receipt-${paymentData.orderId}.pdf`);
        }
        
        function generateReceiptImage() {
            html2canvas(document.querySelector('.success-container')).then(canvas => {
                const link = document.createElement('a');
                link.download = `proofr-receipt-${paymentData.orderId}.png`;
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        }
        
        function resetPaymentFlow() {
            successPage.classList.remove('active');
            registrationPage.classList.add('active');
            
            // Reset form
            document.querySelectorAll('input, select').forEach(el => {
                if (el.type !== 'button') el.value = '';
            });
            
            // Reset selections
            document.querySelectorAll('.event-option.selected').forEach(el => {
                el.classList.remove('selected');
            });
            
            paymentData = {
                firstName: '',
                lastName: '',
                course: '',
                year: '',
                mobile: '',
                whatsapp: '',
                email: '',
                event: '',
                eventName: '',
                amount: 0,
                orderId: '',
                transactionId: '',
                paymentMethod: '',
                dateTime: '',
                status: 'pending'
            };
            
            amountDisplay.textContent = '₹0';
            manualVerificationSection.style.display = 'none';
            
            // Reset steps
            step1.classList.remove('completed');
            step2.classList.remove('completed');
            step3.classList.remove('active');
            step1.classList.add('active');
            
            // Reset tracker
            stepProcessing.innerHTML = '<i class="fas fa-sync-alt fa-spin"></i>';
            stepProcessing.classList.remove('completed');
            stepProcessing.classList.add('active');
            stepCompleted.classList.remove('completed');
        }
    </script>
</body>
</html>
